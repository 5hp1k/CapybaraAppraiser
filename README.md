# CapybaraAppraiser

CapybaraAppraiser - PyQt5-приложение, основными функциями которого
является получение, оценивание и хранение изображений с капибарами, 
получаемыми при помощи ```api.capy.lol```.

## Возможности
- Получение изображения с капибарой по API.
- Возможность дать одну из трех следующих оценок изображению: "нравится", "не нравится" и "нейтрально"
- Сохранение понравившихся картинок в SQL-базу данных.
- Взаимодействие с базой данных без необходимости писать SQL-запросы вручную
- Загрузка изображений и оставленных пользователем комментариев к ним из базы данных
- Сохранение изображений на ПК пользователя при помощи drag and drop.

## Пользовательское руководство

1. Скачайте содержимое ветки ```release```
2. Запустите ```CapybaraAppraiser.exe```
3. В самом начале у вас не будет инициализирована база данных, потому загрузить изображения из нее вы не сможете,
поэтому загляните в меню настроек и убедитесь, что галочка в нем отжата.
4. По нажатии на кнопку "Get Picture" или "Next Picture" вы получаете новое изображение с капибарой. 
Кнопки слева и справа от центральной могут быть нажаты в зависимости от оценки, которую вы хотите выставить изображению.
5. Сохранение в базу данных происходит при помощи нажатия на кнопку с дискетой. Ввод комментария опционален.
6. Затем можно нажать на правую нижнюю кнопку, которая откроет окно взаимодействия с базой данных.
Когда окно откроется впервые, нужно будет нажать "Load database", чтобы загрузить базу данных из файла в таблицу. 
При каждом изменении в базе данных для отображения актуальной версии базы необходимо нажимать на эту кнопку.
7. Для изменения значений в ячейках достаточно дважды кликнуть по требуемой ячейке и ввести изменение, после чего нажать
на "Save changes".
8. Удаление строки из базы данных происходит так: нужно нажать на любую ячейку требуемой строки, после чего кликнуть на 
кнопку со значком мусорной корзины, и запись будет удалена как из таблицЫ, так и из базы данных.
9. Для полной очистки базы данных необходимо нажать на кнопку со значком метлы.
10. Если у вас в базе данных имеется некоторое количество записей, вы можете просматривать изображения из нее. 
Для этого необходимо установить галочку в меню настроек и нажать на "Apply", после чего все изображения, 
которые вы будете получать нажатием на "Get Picture" или "Next Picture" будут браться с вашей базы данных.

## Руководство разработчика

1. Клонируйте репозиторий:

   ```git clone https://github.com/5hp1k/CapybaraAppraiser```
2. Перейдите в ветку main:
   ```git checkout main```

3. Установите зависимости:
   ```pip install -r requirements.txt```

3. Описание модулей приложения:
- ```app.py``` - главный модуль приложения
- ```settings_widget.py``` - модуль меню опций приложений
- ```db_widget.py``` - модуль меню взаимодействия с SQL-базой данных,
отображаемой в виде виджета-таблицы.
- ```request_picture.py``` - модуль, в котором реализуется класс
изображения, отображаемого на главной странице приложеня.
Также здесь реализован GET-запрос этого самого изображения.
- ```db_manipulate.py``` - в данном модуле реализована работа с SQL-базой данных
посредством SQL-запросов.
- ```capy_exceptions.py``` - данный модуль содержит в себе
исключения, вызываемые в различных частях программыы

# Тестирование
В ветке main также содержится файл ```app_test.py```.
Этот файл нужен для тестирования приложения при помощи библиотеки
```pytest``` и никак не связан с функциональностью самого приложения.
По этой причине данная библиотека не входит в список зависимостей, но 
разработчик, если ему потребуется, может тестировать приложение и 
создавать новые тесты в этом модуле.
